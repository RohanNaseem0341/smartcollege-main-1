{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}
{{ block.super }}
<style type="text/css">
  .dashboard {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 20px;
  }

  .dashboard .welcome-message {
    width: 100%;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    padding: 30px;
    margin-bottom: 20px;
    border-top: 4px solid #1a73e8;
  }

  .dashboard .welcome-message h2 {
    color: #1a73e8;
    font-size: 24px;
    margin-top: 0;
    margin-bottom: 15px;
  }

  .dashboard .welcome-message p {
    color: #666;
    font-size: 16px;
    line-height: 1.5;
    margin-bottom: 0;
  }

  .dashboard .stats-row {
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 20px;
  }

  .dashboard .stat-card {
    flex: 1;
    min-width: 200px;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    padding: 20px;
    text-align: center;
  }

  .dashboard .stat-card.students {
    border-top: 4px solid #1a73e8;
  }

  .dashboard .stat-card.teachers {
    border-top: 4px solid #34a853;
  }

  .dashboard .stat-card.courses {
    border-top: 4px solid #fbbc04;
  }

  .dashboard .stat-card.exams {
    border-top: 4px solid #ea4335;
  }

  .dashboard .stat-card .stat-value {
    font-size: 36px;
    font-weight: 600;
    margin: 10px 0;
  }

  .dashboard .stat-card .stat-label {
    color: #666;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .dashboard .stat-card.students .stat-value {
    color: #1a73e8;
  }

  .dashboard .stat-card.teachers .stat-value {
    color: #34a853;
  }

  .dashboard .stat-card.courses .stat-value {
    color: #fbbc04;
  }

  .dashboard .stat-card.exams .stat-value {
    color: #ea4335;
  }

  .dashboard .module {
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    border: none;
    overflow: hidden;
    margin-bottom: 0;
  }

  .app-studentmanagementsystem .module table {
    width: 100%;
  }

  .app-studentmanagementsystem .module h2 {
    background: #1a73e8;
    color: white;
    font-weight: 500;
    border-radius: 8px 8px 0 0;
  }

  .app-auth .module h2 {
    background: #34a853;
    color: white;
    font-weight: 500;
    border-radius: 8px 8px 0 0;
  }

  .dashboard .colMS {
    margin-right: 0;
    width: 100%;
  }

  .dashboard #content-related {
    float: none;
    width: 100%;
    margin-right: 0;
  }

  .dashboard #content-related .module {
    margin-bottom: 20px;
  }

  .dashboard .quick-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 15px;
  }

  .dashboard .quick-actions a {
    background-color: #f5f5f5;
    border-radius: 6px;
    padding: 10px 15px;
    text-decoration: none;
    color: #333;
    font-weight: 500;
    display: flex;
    align-items: center;
    transition: all 0.2s ease;
  }

  .dashboard .quick-actions a:hover {
    background-color: #e0e0e0;
  }

  .dashboard .quick-actions a svg {
    margin-right: 8px;
    fill: #1a73e8;
  }

  .dashboard .recent-actions .module h2 {
    background: #4285f4;
    color: white;
    font-weight: 500;
    border-radius: 8px 8px 0 0;
  }

  .dashboard .col2 {
    flex: 2;
    min-width: 350px;
  }

  .dashboard .col1 {
    flex: 1;
    min-width: 250px;
  }

  @media (max-width: 767px) {
    .dashboard {
      flex-direction: column;
    }
    .dashboard .col1, .dashboard .col2 {
      width: 100%;
    }
  }
</style>
{% endblock %}

{% block coltype %}colMS{% endblock %}

{% block bodyclass %}{{ block.super }} dashboard{% endblock %}

{% block content %}
<div id="content-main">
  <div class="welcome-message">
    <h2>Welcome to Smart College Administration</h2>
    <p>This is your dashboard for managing students, teachers, courses, grades, fees, and examinations. Use the quick links below or navigate through the menu to access different sections.</p>
    
    <div class="quick-actions">
      <a href="{% url 'admin:studentmanagementsystem_student_changelist' %}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z"/>
        </svg>
        Manage Students
      </a>
      <a href="{% url 'admin:studentmanagementsystem_teacher_changelist' %}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/>
        </svg>
        Manage Teachers
      </a>
      <a href="{% url 'admin:studentmanagementsystem_courses_changelist' %}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
        </svg>
        Manage Courses
      </a>
      <a href="{% url 'admin:studentmanagementsystem_fees_changelist' %}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
        </svg>
        Manage Fees
      </a>
      <a href="{% url 'admin:studentmanagementsystem_examination_changelist' %}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
        </svg>
        Manage Exams
      </a>
    </div>
  </div>

  <div class="stats-row">
    <div class="stat-card students">
      <div class="stat-value">{{ studentcount }}</div>
      <div class="stat-label">Students</div>
    </div>
    <div class="stat-card teachers">
      <div class="stat-value">{{ teachercount }}</div>
      <div class="stat-label">Teachers</div>
    </div>
    <div class="stat-card courses">
      <div class="stat-value">{{ coursecount }}</div>
      <div class="stat-label">Courses</div>
    </div>
    <div class="stat-card exams">
      <div class="stat-value">{{ examcount }}</div>
      <div class="stat-label">Exams</div>
    </div>
  </div>

  <div class="app-list dashboard">
    <div class="col2">
      {% for app in app_list %}
        <div class="app-{{ app.app_label }} module">
          <table>
            <caption>
              <a href="{{ app.app_url }}" class="section" title="{% blocktranslate with name=app.name %}Models in the {{ name }} application{% endblocktranslate %}">{{ app.name }}</a>
            </caption>
            {% for model in app.models %}
              <tr class="model-{{ model.object_name|lower }}">
                {% if model.admin_url %}
                  <th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>
                {% else %}
                  <th scope="row">{{ model.name }}</th>
                {% endif %}

                {% if model.add_url %}
                  <td><a href="{{ model.add_url }}" class="addlink">{% translate 'Add' %}</a></td>
                {% else %}
                  <td>&nbsp;</td>
                {% endif %}

                {% if model.admin_url and show_changelinks %}
                  <td><a href="{{ model.admin_url }}" class="changelink">{% translate 'Change' %}</a></td>
                {% else %}
                  <td>&nbsp;</td>
                {% endif %}
              </tr>
            {% endfor %}
          </table>
        </div>
      {% endfor %}
    </div>

    <div class="col1 recent-actions">
      <div class="module">
        <h2>{% translate 'Recent actions' %}</h2>
        {% load log %}
        {% get_admin_log 10 as admin_log for_user user %}
        {% if not admin_log %}
          <p>{% translate 'None available' %}</p>
        {% else %}
          <ul class="actionlist">
            {% for entry in admin_log %}
              <li class="{% if entry.is_addition %}addlink{% endif %}{% if entry.is_change %}changelink{% endif %}{% if entry.is_deletion %}deletelink{% endif %}">
                {% if entry.is_deletion or not entry.get_admin_url %}
                  {{ entry.object_repr }}
                {% else %}
                  <a href="{{ entry.get_admin_url }}">{{ entry.object_repr }}</a>
                {% endif %}
                <br>
                {% if entry.content_type %}
                  <span class="mini quiet">{% filter capfirst %}{{ entry.content_type.name }}{% endfilter %}</span>
                {% else %}
                  <span class="mini quiet">{% translate 'Unknown content' %}</span>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block sidebar %}{% endblock %} 